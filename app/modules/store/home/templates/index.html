<div bindonce ng-class="{navToggled: navToggled, overlayed: chooseDeliveryArea}">
    <aside id="header">
        <div id="toggleCategories" class="icn iNav" ng-click="toggleNav()"></div>
        <div id="pageTitle" ng-click="toggleNav()">
            <i class="icn" bo-class="currentCategoryModel.icon"></i><span bo-text="currentCategoryModel.title"></span>
        </div>
        <div id="toTheInfo" class="icn iInfo"></div>
        <div id="toTheTray">
            <div class="icn iTray">
                <span id="traySize">5</span>
            </div>
        </div>
    </aside>

    <nav id="categoriesNavigation">
        <ul>
            <li ng-repeat="categoryModel in categoriesCollection" bo-class="{ active: categoryModel.id === currentCategoryModel.id }">
                <div ng-click="selectCategory(categoryModel)" class="icn" bo-class="categoryModel.icon"></div>
            </li>
        </ul>
    </nav>

    <div id="storeHome" class="content" ng-click="toggleNav(false)" ng-swipe-left="toggleNav(false)" ng-swipe-right="toggleNav(true)">
        <section class="note above" id="editLocation">
            <i class="editButton inSmallText before" ng-click="chooseDeliveryArea = true"></i><p>in {{ selectedDeliveryAreaModel.minimumDuration }}min nach {{ selectedDeliveryAreaModel.district || selectedDeliveryAreaModel.city }}</p>
        </section>
        <section id="articles">
            <div id="tableRow" col-repeat app-items-collection="itemsCollection" app-col="col">
                <item ng-repeat="itemModel in col"></item>
            </div>
        </section>
        <div ng-click="selectCategory(nextCategoryModel)" bo-if="nextCategoryModel">
            <div id="toNextCategory" bo-class="nextCategoryModel.icon">
                <p>Nächste Kategorie</p>
                <h3 bo-text="nextCategoryModel.title"></h3>
            </div>
        </div>
    </div>
</div>
<div id="deliveryAreaOverlayContainer" ng-if="chooseDeliveryArea">
    <div id="deliveryAreaOverlay" bindonce>
        <header>
            <div class="logo"></div>
            <p>SUBWAY<span class="superscript">®</span>  <span bo-text="storeModel.title"></span>
                <br>kommt zu dir nach Hause.</p>
            <p class="callToAction">Wohin dürfen wir liefern?</p>
        </header>
        <div id="storeDeliveryAreaSuggestion" ng-class="{ loading: checkingPostal }">
            <compass id="suggestionLoader" rotate="checkingPostal"></compass>
            <div class="storeMultipleDeliveryAreas" ng-if="suggestedDeliveryAreasCollection.length > 0">
                <div ng-class="{ selected: deliveryAreaModel === selectedDeliveryAreaModel }" class="storeDeliveryArea" ng-repeat="deliveryAreaModel in suggestedDeliveryAreasCollection" ng-click="selectDeliveryArea(deliveryAreaModel)">
                    <div class="postal">{{ deliveryAreaModel.postal }}</div>
                    <div class="storeDeliveryAreaDescription">
                        <h3>{{ deliveryAreaModel.district || deliveryAreaModel.city }}</h3>
                        <p>(in <span>30</span> min für min. <span>15</span>€)</p>
                    </div>
                </div>
            </div>
            <p class="smallHint" ng-if="suggestedDeliveryAreasCollection.length > 0">Außerdem liefern wir in folgende Gebiete:</p>
        </div>
        <div id="storeDeliveryAreas">
            <div class="storeMultipleDeliveryAreas" ng-repeat="(postal, deliveryAreasCollection) in groupedDeliveryAreasCollection">
                <div ng-class="{ selected: deliveryAreaModel === selectedDeliveryAreaModel }" class="storeDeliveryArea" ng-repeat="deliveryAreaModel in deliveryAreasCollection" ng-click="selectDeliveryArea(deliveryAreaModel)">
                    <div class="postal" bo-text="postal"></div>
                    <div class="storeDeliveryAreaDescription">
                        <h3 bo-text="deliveryAreaModel.district || deliveryAreaModel.city"></h3>
                        <p>(in <span bo-text="deliveryAreaModel.minimumDuration"></span> min für min. <span bo-text="deliveryAreaModel.minimumValue"></span>€)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
